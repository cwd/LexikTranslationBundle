{% set themeColor = 'blue-steel' %}
{% set themeStyle = 'light' %}

{% embed "CwdAdminMetronicBundle:Helper:portlet.html.twig" with {title: 'Profile'|trans, icon: icon|default('fa-ellipsis-v'), color: 'light'} %}
    {% block body %}

        <dl class="dl-horizontal profile">
            <dt>{{ "Name"|trans }}</dt>
            <dd>{{ crudObject.name }}</dd>

            <dt>{{ "Description"|trans }}</dt>
            <dd>{{ crudObject.description|raw }}</dd>

            <dt>{{ "Contactname"|trans }}</dt>
            <dd>{{ crudObject.contactname }}</dd>

            <dt>{{ "Profilimage"|trans }}</dt>
            <dd><img src="{{ crudObject.avatar|cwdImage().cropResize(null, 150) }}" class="img-thumbnail"/></dd>

            <dt>{{ "Address"|trans }}</dt>
            <dd>

                {{ crudObject.address.street }}<br />
                {{ crudObject.address.zipcode }} {{ crudObject.address.city }}<br />
                {{ crudObject.address.country }} / {{ crudObject.address.district.region.name }} / {{ crudObject.address.district.name }}<br />


                <a id="mortician-map-toggle" role="button" class="btn btn-xs btn-primary margin-bottom-5" href="#mortician-map" data-toggle="collapse" aria-expanded="false" aria-controls="mortician-map">{{ "Show map"|trans }}</a>
                <div class="collapse" id="mortician-map">
                    <div id="gmap_marker" class="gmaps" style="height:250px"></div>
                </div>
                <script type="text/javascript">
                    $(document).ready(function(){
                        $('#mortician-map').on('shown.bs.collapse', function(e) {
                            $('#mortician-map-toggle').html("{{ "Hide map"|trans }}");
                            var map = new GMaps({
                                div: '#gmap_marker',
                                lat: {{ crudObject.address.lat }},
                                lng: {{ crudObject.address.lng }},
                            });
                            map.addMarker({
                                lat: {{ crudObject.address.lat }},
                                lng: {{ crudObject.address.lng }}
                            });
                            map.setZoom(16);
                        });

                        $('#mortician-map').on('hidden.bs.collapse', function(){
                            $('#mortician-map-toggle').html("{{ "Show map"|trans }}");
                        });
                    })
                </script>


            </dd>

            <dt>{{ "Phone"|trans }}</dt>
            <dd><i class="fa fa-phone"></i> {% if crudObject.phone is not empty %}{{ phone_number_format(crudObject.phone, 'INTERNATIONAL') }}{% endif %}</dd>

            <dt>{{ "Fax"|trans }}</dt>
            <dd><i class="fa fa-fax"></i> {% if crudObject.phone is not empty %}{{ phone_number_format(crudObject.fax, 'INTERNATIONAL') }}{% endif %}</dd>

            <dt>{{ "Webpage"|trans }}</dt>
            <dd><i class="fa fa-globe"></i> <a href="{{ crudObject.webpage }}" target="_blank">{{ crudObject.webpage }}</a></dd>

            <dt>{{ "Email"|trans }}</dt>
            <dd><i class="fa fa-envelope"></i> <a href="mailto:{{ crudObject.email }}">{{ crudObject.email }}</a></dd>

            <dt>{{ "Vat"|trans }}</dt>
            <dd>{{ crudObject.vat }}</dd>

            <dt>{{ "RegNumber"|trans }}</dt>
            <dd>{{ crudObject.commercialRegNumber }}</dd>

            <dt>{{ "images"|trans }}</dt>
            <dd>
                <div id="mortician-carousel" class="carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        {% for slide in crudObject.getMedias() %}
                        <li data-target="#mortician-carousel" data-slide-to="{{ loop.index0 }}" class="{% if loop.index0 == 0 %}active{% endif %}"></li>
                        {% endfor %}
                    </ol>

                    <!-- Wrapper for slides -->
                    <div class="carousel-inner" role="listbox">
                        {% for slide in crudObject.getMedias() %}
                        <div class="item {% if loop.index0 == 0 %}active{% endif %}">
                            <img src="{{ slide.media|cwdImage.cropResize(620) }}" alt="" class="img-responsive">
                            <div class="carousel-caption">
                                {{ slide.description }}
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <!-- Controls -->
                    <a class="left carousel-control" href="#mortician-carousel" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#mortician-carousel" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </dd>
        </dl>

    {% endblock %}
    {% block actions %}
        {% if is_granted('mortician.edit', crudObject) %}
            <a href="{{ path('aspetos_admin_mortician_mortician_edit', { id: crudObject.id }) }}" class="btn btn-default btn-sm"><i class="fa fa-edit"></i> {{ "Edit"|trans }}</a>
        {% endif %}
    {% endblock %}
{% endembed %}



